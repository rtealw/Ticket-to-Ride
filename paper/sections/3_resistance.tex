%%novalidate
\newpage
\section{Destination Tickets}

\subsection{Winning}
An obvious strategy in \textit{Ticket to Ride} is to collect
Destination Tickets and buy routes to connect them.
We investigate the effect of collecting Destination Tickets
on winning the game.
We simulate 10,000 two-player and 10,000 four-player games.
For each Destination Ticket, we calculate the proportion of 
games that the player holding the Destination Ticket won.
Our results appear in \cref{fig:tickets}.
(For example, players in two-player games with Phoenix to Portland
won almost exactly half of their games.)

\end{multicols}
\begin{figure}[h]
\centering
\includegraphics[scale=.65]{figures/destination_tickets}
\caption{For each Destination Ticket,
the proportion of two-player and four-player games that 
the player with the Destination Ticket won.
The vertical red lines at $1/4$ and $1/2$ represent
the expected proportion of games players would win
if Destination Tickets had no effect.}
\label{fig:tickets}
\end{figure}
\begin{multicols}{2}

The vertical red lines at .25 and .5 indicate
the expected proportion of wins if Destination Tickets
had no effect on winning: players in two-player games
would win half the time and players in four-player games
would win a quarter of the time.

In two-player games, there are 13 Destination Tickets 
that win more than the expected $50\%$ of games.
In four-player games, there are only eight Destination Tickets
that clearly win more than the expected $25\%$ of games plus
another four on the borderline.
That is, out of the 30 Destination Tickets, roughly a third
in both two- and four-player games win more than expected.
The implication is that a randomly chosen Destination 
Ticket is not advantageous.
However, a subset of Destination Tickets--approximately the same
set for both two- and four-player games--wins more often than expected.
The ones that win the most are Montreal to Vancouver,
New York to Seattle, and Chicago to Los Angeles.

An inspection of \cref{fig:board} shows that the paths between 
these three Destination Tickets are some of the longest on the board 
and include routes with the most trains.
However, to gain a better understanding of what makes some
Destination Tickets more advantageous than others,
we investigate their characteristics
that most closely correlate with winning.
We begin in the next subsection by developing a measure
of the difficulty of connecting one city to another.

\subsection{Effective Resistance}
The \textit{Ticket to Ride} board can mathematically
be interpreted as a graph where cities represent
nodes and routes represent edges.
Thus, to analyze the difficulty of connecting a
pair of cities we can frame the problem in graph theoretic language.
One of the most powerful and natural measures
between two nodes on a graph is effective resistance
\cite{ellens2011effective}.
Imagine that the \textit{Ticket to Ride} board was
a large electrical circuit with a unit current
entering at city $a$ and leaving at city $b$.
Effective resistance indicates
how much work a current needs to exert
to get from $a$ to $b$.
In general, the number of paths and length of routes 
determine the effective resistance:
two cities with fewer paths and longer routes
have a higher effective resistance between them
than two cities with many paths and shorter routes.
We calculate the effective resistance for each 
Destination Ticket in order to gain insight
into what makes some more advantageous than others.

On a small graph, effective resistance can be calculated
by repeatedly applying the following rules:
Consider two edges with resistances $r_1$ and $r_0$.
If the two edges are in series (edge 1 connects node $i$ to $j$
and edge 2 connects node $j$ to $k$), then the resistance between
$i$ and $k$ is $r_1 + r_2$.
If the two edges are in parallel (both edge 1 and edge 2 connect
node $i$ to $j$), then the resistance between $i$ and $j$
is $(1/r_1 + 1/r_2)^{-1}$.

On a large graph like the \textit{Ticket to Ride} board, 
we need a more robust strategy.
We use two separate algorithms to find the effective resistance
of Destination Tickets
\cite{ellens2011effective, wu2004theory}.
Both algorithms calculate the effective resistance by finding 
the eigenvalues of the Laplacian matrix for a given graph.
(The Laplacian is the degree matrix $D$ minus the adjacency
matrix $A$ where $D_{i,i}$ is the weighted degree of node $i$
and $A_{i,j}$ is the resistance of the edges between nodes
$i$ and $j$.)

We let the weight between two cities be the number
of trains of the route connecting them.
In the case that there are two routes between cities,
we let the weight be $(1/r + 1/r)^{-1}=r/2$ where
$r$ is the number of trains of each route.

In the next subsection, we calculate the effective
resistance of all Destination Tickets as a tool
to find what most closely correlates with winning.

\end{multicols}
\begin{figure}
    \centering
    \includegraphics[scale=.5]{figures/resistance_aggregate}
    \caption{Destination Tickets plotted by their effective
    resistance and minimum path length and colored
    by overall proportion of wins.
    The line of best fit gives an approximation of the
    Destination Tickets that have a higher reward per difficulty
    (above the line).
    Note: the $9^{th}$ Destination Ticket 
    is obscured by the $11^{th}$.}
    \label{fig:resistance}
\end{figure}
\begin{multicols}{2}

\subsection{Winning \& Effective Resistance}

In \cref{fig:resistance},
Destination Tickets are plotted by their effective resistance
and minimum path length.
Recall that the reward for connecting a Destination Ticket
is the length of the shortest path between its two cities.
Since effective resistance measures the difficulty of
connecting the two cities, the line of best fit in \cref{fig:resistance}
indicates reward per difficulty.
The Destination Tickets above the line of best fit are
a "good" deal relative to the rest of the Destination Tickets
whereas those below the line of best fit are a "bad" deal.

The proportion of wins (also dubbed overall wins
in \cref{fig:correlation_table} and \cref{fig:correlation_figures})
is the difference from the expected proportion of wins
across two- and four-player games.
For example, a Destination Ticket with a value of .05 indicates
that players with that destination Ticket 
win on average $30\%$ of four-player games
(rather than the expected $25\%$) and $55\%$ of 
two-player games (rather than the expected $50\%$).

We use the proportion of wins as a proxy for the desirability
of Destination Tickets and attempt to interpret what variables
increase player wins from \cref{fig:resistance}.
It appears that Destination Tickets with longer minimum paths win
more as well as Destination Tickets with a smaller effective resistance.
But the correlation between either variable and the proportion
of wins is not clear-cut.

\cref{fig:correlation_table} shows the Pearson correlation statistic
between wins and various (possibly) related variables.
The path length and resistance are the y- and x-axes of 
\cref{fig:resistance}.
The residual is the difference between the predicted
path length (line of best fit) and the actual path length
in \cref{fig:resistance}.
The results indicate that path length is well correlated with wins,
resistance is not correlated with wins, and residual is very
well correlated with wins.
\cref{fig:correlation_figures} shows the data points and
their relationship to wins summarized in
in the last column of \cref{fig:correlation_table}.

\begin{figure}[H]
    \centering
    \includegraphics[scale=.12]{figures/pearsons_table.png}
    \caption{The Pearson correlation statistic between
    the win proportion of Destination Tickets
    and measures of difficulty.
    A single asterisk (in light green) indicates a p-value
    below 1E-2. Double asterisks (in green) indicate a
    p-value below 1E-4. Triple asterisks (in dark green)
    indicate a p-value below 1E-6.}
    \label{fig:correlation_table}
\end{figure}

\end{multicols}
\begin{figure}[H]
    \centering
    \begin{subfigure}[t]{0.33\textwidth}
        \centering
        \includegraphics[height=1.7in]{figures/correlation0}
    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.33\textwidth}
        \centering
        \includegraphics[height=1.7in]{figures/correlation1}
    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.33\textwidth}
        \centering
        \includegraphics[height=1.7in]{figures/correlation2}
    \end{subfigure}%
    \caption{Destination Tickets by the
    difference between the expected proportion of wins
    and (possibly) related variables.
    The last column of \cref{fig:correlation_figures}
    indicates how closely the lines of best fit
    model Destination Tickets.}
    \label{fig:correlation_figures}
\end{figure}
\begin{multicols}{2}

While path length is a good predictor 
of which Destination Tickets win, 
the residual from the model built from effective resistance
is even better (\cref{fig:correlation_table} and
\cref{fig:correlation_figures}).
It is certainly easier to compare path length when choosing
between Destination Tickets in real time.
But learning the advantageous Destination Tickets may be worthwhile:
As a general rule, Destination Tickets with a minimum path
longer than 15 trains or those with small effective resistance
(many short paths) outperform their counterparts.

Referring to \cref{fig:resistance}, 
we now advance several explanations for why Destination Tickets 
win more than expected.
The Destination Tickets with more than 15 trains 
enjoy high rewards and middle-of-the-pack 
resistances.
In addition, they benefit from the advantages of longer 
routes discussed in \cref{sec:overvalued}.
The remaining Destination Tickets--below or slightly 
above the line of best fit--seem to be more affected
by resistance: the higher the resistance, the
lower the proportion of wins.
Perhaps because the resistance between these pairs of cities
is roughly comparable, those that can be connected more easily
help players more.
